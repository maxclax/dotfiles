;;; init-pomodoro.el -*- mode: emacs-lisp; lexical-binding: t; -*-

;; Time tracking and pomodoro configuration

(use-package! pomm
  :defer t
  :commands (pomm pomm-third-time)
  :config
  (setq pomm-work-period 30
        pomm-long-break-period 25
        pomm-short-break-period 5
        alert-default-style (if (featurep 'ns) 'osx-notifier 'libnotify)
        pomm-audio-enabled t
        pomm-audio-tick-enabled t)

  ;; Only enable mode line if function exists
  (when (fboundp 'pomm-mode-line-mode)
    (pomm-mode-line-mode))

  ;; Only add hooks if functions exist
  (when (fboundp 'pomm--sync-org-clock)
    (add-hook 'pomm-on-status-changed-hook #'pomm--sync-org-clock))
  (when (fboundp 'pomm-third-time--sync-org-clock)
    (add-hook 'pomm-third-time-on-status-changed-hook #'pomm-third-time--sync-org-clock)))


(provide 'init-pomodoro)
