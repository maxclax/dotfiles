;;; init-gptel.el -*- mode: emacs-lisp; lexical-binding: t; -*-
;; API keys are read automatically from ~/.authinfo (managed by chezmoi)

(use-package! gptel
  :commands (gptel-rewrite gptel-menu gptel-send)
  :config
  ;; Anthropic Claude — key from ~/.authinfo (machine api.anthropic.com)
  (gptel-make-anthropic "Claude" :stream t)

  ;; Ollama — local + cloud models (default backend)
  (setq gptel-backend
        (gptel-make-ollama "Ollama"
          :host "localhost:11434"
          :stream t
          :models '(qwen2.5-coder:14b
                    qwen3-coder:480b-cloud
                    qwen3-coder-next:cloud
                    deepseek-v3.1:671b-cloud
                    kimi-k2.5:cloud)))
  (setq gptel-model 'qwen3-coder-next:cloud)
  (setq gptel-default-mode 'org-mode))

(provide 'init-gptel)
