# aliases.sh -*- mode: sh; lexical-binding: t; -*-

# shellcheck shell=bash

# Aliases; runs in the same shell you are already in
# See bin folder for scripts which will run in their own shell

# Global settings
alias dotfiles='cd {{ .chezmoi.sourceDir }}'

alias workspace='cd {{ .workspace }}'
alias workspace_extra='cd {{ .workspace_extra }}'
alias resources='cd {{ .resources }}'
alias jupyter='cd {{ .jupyter }}'
alias playground='cd {{ .playground  }}'

alias r='ranger .'
alias y='yazi .'
alias br='broot'
alias ll='eza --long --header --group-directories-first --git --group --all --color=auto'
alias tree='tree -C'
alias t="tree -C -L 2"
alias t3="tree -C -L 3"

# emacsclient
alias e='emacsclient -t'      # Terminal Emacs
alias ec='emacsclient -c -n'  # GUI Emacs (non-blocking)
alias killemacs='emacsclient -e "(kill-emacs)"'

# Emacs commands for different distributions
alias doom={{ .chezmoi.homeDir }}/.config/emacs/bin/doom

# GUI Emacs launchers for different distributions (non-blocking)
alias emacs-default='emacs &'
{{ if or (eq .emacsType "purcell") .emacsLoadAllDistros -}}
alias emacs-purcell='emacs --init-directory={{ .chezmoi.homeDir }}/.config/purcellemacs.d &'
{{- end }}

# Emacs server commands for different distributions
alias emacs-server-purcell='emacs --daemon --init-directory={{ .chezmoi.homeDir }}/.config/purcellemacs.d'
alias emacs-server-default='emacs --daemon'

# Set default emacs-server based on chosen distribution
{{- if eq .emacsType "purcell" }}
alias emacs-server='emacs-server-purcell'p
{{- else }}
alias emacs-server='emacs-server-default'
{{- end }}

# Restart commands for each distribution
alias restart-emacs='killemacs && emacs-server'  # Restart current default
alias restart-emacs-purcell='killemacs && emacs-server-purcell'
alias restart-emacs-default='killemacs && emacs-server-default'

# Git
alias lg='lazygit'
alias lazypodman='DOCKER_HOST=unix://$(podman machine inspect --format '"'"'{{`{{.ConnectionInfo.PodmanSocket.Path}}`}}'"'"') lazydocker'
alias lp='lazypodman'

# Python
alias pyclean='find . | grep -E "(__pycache__|\.pyc|\.pyo$)" | xargs rm -rvf'
alias activate='source .venv/bin/activate'

# Home Manager shortcuts (runs from ~/)
alias hmu='make -C ~/ hm_update'          # Update Home Manager
alias hmd='make -C ~/ hm_diff'            # Show what will change
alias hmc='make -C ~/ hm_commit'          # Commit flake.lock changes
alias hml='make -C ~/ hm_list'            # List installed packages

# Chezmoi shortcuts
alias cza='chezmoi apply'           # Apply dotfiles
alias czd='chezmoi diff'            # Show changes

# Shell reload - works for any shell
alias reload-shell='exec $SHELL'   # Restart current shell
 
# Colorize terminal
# ---- Eza (better ls) -----
alias ls="eza --icons=always --grid"
alias ll='eza --long --header --group-directories-first --group --all'

alias ls='ls -G'
alias la='ls -all'
alias ll='ls -lG'
alias lst='ls -T'

# Copy path to clipboard
alias cpwd='pwd | tr -d "\n" | pbcopy'

# Stop wget from creating ~/.wget-hsts file. I don't care about HSTS (HTTP
# Strict Transport Security) for wget; it's not as if I'm logging into my bank
# with it.
alias wget='wget --no-hsts'

# Set NeoVim as vim by default
alias vim='nvim'

# Network diagnostics
alias mtr='sudo mtr'                    # MTR with sudo
alias myip='curl -s ipinfo.io/ip'       # Get public IP
alias ports='sudo lsof -i -P -n | grep LISTEN'  # List open ports

# Pueue job queue management
alias pq='pueue'                        # Base command
alias pqa='pueue add'                   # Quick add job
alias pqs='pueue status'                # Check status
alias pql='pueue log'                   # View logs
alias pqc='pueue clean'                 # Clean finished jobs
alias pqk='pueue kill'                  # Kill job
alias pqp='pueue pause'                 # Pause job
alias pqr='pueue restart'               # Restart job
alias pqd='pueued'                      # Start daemon

{{ if eq .containerEngine "podman" }} 
# ---- Podman -----
alias docker=podman
alias docker-compose=podman-compose
{{ end }}

# ---- pay-respects -----
if [[ "$DOTFILES_SHELL" == "zsh" ]]; then
    eval "$(pay-respects zsh --alias)"
elif [[ "$DOTFILES_SHELL" == "bash" ]]; then
    eval "$(pay-respects bash --alias)"
elif [[ "$DOTFILES_SHELL" == "fish" ]]; then
    eval "$(pay-respects fish --alias)"
fi

# Per-platform settings, will override the above commands
case $(uname) in
Darwin)
  # commands for macOS go here

  ;;
Linux)
  # commands for Linux go here


  ;;
esac
