# -*- mode: nix; -*-
{ pkgs, ... }:

{
  # The home.packages option allows you to install Nix packages into your environment
  home.packages = with pkgs; [
    # Core System & CLI Tools
    age                    # Encryption with GPG keys
    atuin                  # Magical shell history
    bandwhich              # Network utilization display
    bat                    # Cat clone with syntax highlighting
    btop                   # Resource monitor
    chezmoi                # Manage dotfiles across machines
    cmake                  # Cross-platform build system
    curl                   # Transfer data with URLs
    direnv                 # Environment switcher for shell
    duf                    # Disk Usage/Free Utility
    eza                    # Modern replacement for 'ls'
    fd                     # Simple, fast, user-friendly 'find'
    fzf                    # Command-line fuzzy finder
    gh                     # GitHub command-line tool
    git                    # Distributed version control
    git-lfs                # Git Large File Storage
    gnumake                # GNU make utility
    gtrash                 # Trash can for command-line
    htop                   # Interactive process viewer
    inetutils              # Network utilities (ping, telnet, etc.)
    kubectl                # Kubernetes command-line tool
    kubectx                # Switch between k8s contexts
    kubernetes-helm        # Kubernetes package manager
    lazygit                # Simple terminal UI for Git
    lsof                   # List open files
    ncdu                   # Disk usage analyzer
    neofetch               # System information tool
    pipenv                 # Python dependency management
    python3                # The Python programming language
    pay-respects           # Pay respects
    ripgrep                # Recursively searches directories
    shellcheck             # Shell script static analysis
    starship               # Cross-shell prompt
    tmux                   # Terminal multiplexer
    trash-cli              # Command line trash utility
    tree                   # Display directory tree
    wget                   # Retrieve files from web
    zoxide                 # A smarter cd command
    zsh                    # Z shell

    # Cross-platform packages useful on all systems
    asciinema              # Terminal session recorder
    bash                   # Bourne Again Shell
    cacert                 # Certificate authorities
    fuse                   # Filesystem in userspace
    git-absorb             # Automatically absorb staged changes into commits
    gnupg                  # GNU Privacy Guard
    jq                     # Command-line JSON processor
    openssh                # SSH client and server
    openvpn                # Virtual Private Network client/server
    pkg-config             # Package configuration helper
    units                  # Unit conversion tool

    # Common fonts for all systems
    fira-code              # Monospaced font with programming ligatures
    nerd-fonts.fira-code   # Fira Code with Nerd Font icons (new format)
    nerd-fonts.symbols-only # Symbols Nerd Font for Doom Emacs icons
    jetbrains-mono         # JetBrains monospaced font
    font-awesome           # Icon font and CSS toolkit

    # ----------------------------------------------------------------------------
    # Development machines
    # ----------------------------------------------------------------------------
{{- if eq .chezmoi.os "darwin" }}
    # AI Development Tools
    aider-chat
    claude-code
    codex
    gemini-cli
    ollama                 # Run large language models

    # Advanced Development & Programming
    _1password-cli         # 1Password CLI
    borgbackup             # Deduplicating backup program
    borgmatic              # BorgBackup wrapper
    chafa                  # Image to terminal converter
    cmatrix                # Matrix digital rain effect
    coreutils-prefixed     # GNU core utilities with 'g' prefix
    cowsay                 # ASCII pictures of a cow with a message - TEST PACKAGE
    ctop                   # Top-like interface for containers
    discount               # Markdown C implementation
    espanso                # Cross-platform text expander
    fontconfig             # Library for configuring fonts
    glances                # System monitoring tool
    graphviz               # Graph visualization software
    hcloud                 # Hetzner Cloud CLI
    hey                    # HTTP load generator
    hugo                   # Fast static site generator
    iftop                  # Display bandwidth usage
    imagemagick            # Convert, edit, compose images
    k6                     # Modern load testing tool
    lazydocker             # Simple terminal UI for Docker
    luarocks               # Package manager for Lua
    neovim                 # Hyperextensible Vim-based editor
    nixfmt                 # Nix code formatter
    nmap                   # Network discovery and security
    pnpm                   # Fast, efficient package manager
    ranger                 # Console file manager
    ruff                   # Extremely fast Python linter
    sl                     # Steam locomotive animation
    slides                 # Terminal presentation tool
    speedtest-cli          # Test internet bandwidth
    stylelint              # Linter for CSS
    tldr                   # Collaborative cheatsheets
    tmuxinator             # Manage complex tmux sessions
    tree-sitter            # Parser generator tool
    trufflehog             # Find leaked credentials
    uv                     # Fast Python package installer
    vips                   # Fast image processing library
    watch                  # Execute a program periodically

    # Kubernetes & Cloud Development
    k9s                    # Kubernetes CLI To Manage Clusters
    kind                   # Kubernetes IN Docker
    linkerd                # Service mesh for Kubernetes
    popeye                 # Kubernetes cluster sanitizer
    stern                  # Multi pod log tailing
    terraform              # Infrastructure as Code

    # Language-specific packages for development
    # Python
    python3Packages.editorconfig # EditorConfig for Python
    python3Packages.isort  # Sort Python imports
    python3Packages.ptpython # Advanced Python REPL
    python3Packages.pytest # Python testing framework

    # Node.js
    nodePackages.cspell    # Spell checker for code
    nodePackages.js-beautify # Beautifier for JavaScript
    nodejs                 # JavaScript runtime

    # Emacs
    clang
    coreutils              # Core utilities
    emacsPackages.editorconfig # EditorConfig for Emacs

    # Development utilities
    aspell                 # Spell checker
    pgcli                  # Postgres CLI with autocompletion

    # macOS-specific packages
    dockutil               # Manage macOS Dock items
    jankyborders           # Borders for macOS windows
    mas                    # Mac App Store CLI
    pngpaste               # Paste PNG into file
{{- end }}

    # ----------------------------------------------------------------------------
    # Server/Headless machines (rp-, debian, ubuntu, centos)
    # ----------------------------------------------------------------------------
{{- if eq .chezmoi.os "linux" }}
    # Linux-specific packages only
    gcc                    # GNU Compiler Collection
    atop                   # Advanced system and process monitor
    inotify-tools          # Filesystem event monitoring

{{ if not .ephemeral -}}
    # GUI
    i3                     # Tiling window manager
    keepassxc              # Password manager
    alacritty              # GPU-accelerated terminal
    appimage-run           # For running AppImages like Proton VPN
{{- end }}

{{- end }}

    # Conditional Packages
{{- if .podmanEnabled }}
    podman                 # Daemonless container engine
    podman-compose         # Run docker-compose.yml
{{- end }}
{{- if .dockerEnabled }}
    docker                 # Containerization platform
    docker-compose         # Run multi-container applications
{{- end }}
{{- if .goEnabled }}
    go                     # The Go programming language
    gopls                  # Go Language Server Protocol implementation
    gomodifytags           # Go tool to modify struct tags
    gotests                # Go test generator
    gore                   # Go REPL
{{- end }}
{{- if .rustEnabled }}
    rustc                  # The Rust compiler
    rustup                 # Rust toolchain installer
{{- end }}
  ];
}
