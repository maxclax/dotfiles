# -*- mode: nix; -*-
{ config, lib, pkgs, ... }:

{
  # Install Aerospace
  home.packages = [ pkgs.aerospace ];

  # Create LaunchAgent for Aerospace to start automatically
  launchd.agents.aerospace = {
    enable = true;
    config = {
      ProgramArguments = [
        "${pkgs.aerospace}/Applications/AeroSpace.app/Contents/MacOS/AeroSpace"
      ];
      RunAtLoad = true;
      KeepAlive = true;
      StandardOutPath = "${config.home.homeDirectory}/.local/var/log/aerospace.log";
      StandardErrorPath = "${config.home.homeDirectory}/.local/var/log/aerospace.log";
    };
  };

  # Ensure log directory exists
  home.file.".local/var/log/.keep".text = "";
}
